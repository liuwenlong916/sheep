<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>

    async function async1() {
      console.log('async1 start');
      await async2();
      //await 会阻塞后面的代码，外部代码全部执行完成后，会把后面代码加入到微任务中，等待执行
      console.log('async1 end');
    }
    async function async2() {
      console.log('async2');
      await async3();
      // console.log('async2 end');
    }
    async function async3() {
      console.log('async3')
    }
    console.log('script start');
    async1();
    setTimeout(() => { console.log('setTimeout'); })
    const p = new Promise((resolve) => {
      resolve()
      console.log('promise start');
    }).then(() => {
      console.log('promise end');
    }).then(() => {
      console.log('promise2 end')
    })
    // const p = new Promise((resolve) => {
    //   resolve()
    //   console.log('promise start');
    // })
    // p.then(() => {
    //   console.log('promise end');
    // })
    // p.then(() => {
    //   console.log('promise2 end')
    // })

    console.log('script end')

    async function async1() {
      console.log('async1 start');
      await async2();
      console.log('async1 end');
    }
    async function async2() {
      console.log('async2');
    }
    console.log('script start');
    setTimeout(function () {
      console.log('setTimeout');
    }, 0)
    async1();
    new Promise(function (resolve) {
      console.log('promise1');
      resolve();
      console.log('promise2')
    }).then(function () {
      console.log('promise3');
    });
    console.log('script end');



  </script>
</body>

</html>